<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;charset=UTF-8,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100'><rect width='100' height='100' fill='red'/></svg>">
    <title>Notes App</title>
</head>

<body>
    <script type="module">
        import { appState, widgets, pageWidget, colors, lightTheme, darkTheme, applyTheme, updatePage, goTo, initializeApp, resolveInitialPath, widget, templateWidget, row, column, grid, text, textLink, image, svg, canvas, video, youtubeVideo, button, select, input, textArea } from '/home/n1/projects/profiler/frontend/apex.js';
        import { loadingPage, notFoundPage, generalErrorPage } from './notesbot.js';
        import { initializeApp as initializeFirebase } from "firebase/app";
        import { getAuth, onAuthStateChanged, GoogleAuthProvider, signInWithRedirect, signInWithPopup, signOut } from "firebase/auth";
        // import { getAnalytics } from "firebase/analytics";


        // async function pathController(segments, params) {
        //     if (segments.length === 1 && segments[0] === 'editprofile') {
        //         updatePage(editProfilePage());
        //     }
        //     else if (segments.length === 1 && (segments[0] === 'addeducation' || segments[0] === 'addcertificate')) {
        //         updatePage(addEducationPage());
        //     }
        //     else if (segments.length === 1 && segments[0] === 'addproject') {
        //         updatePage(addProjectPage());
        //     }
        //     else if (segments.length === 1 && segments[0] === 'visitors' && (appState.plan.tier === 'basic' || appState.plan.tier === 'pro')) {
        //         updatePage(visitorsPage());
        //     }
        //     else if (segments.length === 1 && segments[0] === 'coverletter' && (appState.plan.tier === 'basic' || appState.plan.tier === 'pro')) {
        //         updatePage(coverLetterPage());
        //     }
        //     else if (segments.length === 1 && segments[0] === 'aiadvice' && (appState.plan.tier === 'basic' || appState.plan.tier === 'pro')) {
        //         updatePage(aiAdvicePage());
        //     }
        //     else {
        //         updatePage(profilePage());
        //     }
        // }


        const firebaseConfig = {
            apiKey: "AIzaSyCpE4ytbA0WGmVV2gcun98F1FRHjtW-qtI",
            authDomain: "notesbot-be271.firebaseapp.com",
            projectId: "notesbot-be271",
            storageBucket: "notesbot-be271.firebasestorage.app",
            messagingSenderId: "408712122661",
            appId: "1:408712122661:web:30fa210ad4a3dc73ec4acc",
            measurementId: "G-85D3XP1ZM8"
        };
        appState.firebase = {};
        appState.firebase.app = initializeFirebase(firebaseConfig);
        appState.firebase.auth = getAuth(appState.firebase.app);
        // appState.firebase.analytics = getAnalytics(appState.firebase.app);
        appState.firebase.GoogleAuthProvider = GoogleAuthProvider;
        appState.firebase.signInWithRedirect = signInWithRedirect;
        appState.firebase.signInWithPopup = signInWithPopup;
        appState.firebase.signOut = signOut;
        // initializeApp({ pathController });
        // window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
        //     if (e.matches) {
        //         applyTheme(darkTheme);
        //     } else {
        //         applyTheme(lightTheme);
        //     }
        // });
        // appState.session = {};
        // updatePage(loadingPage());
        // onAuthStateChanged(appState.firebase.auth, (user) => {
        //     if (user) {
        //         httpsCallable(appState.firebase.functions, 'init_call')({})
        //             .then((result) => {
        //                 appState.profile = result.data.profile;
        //                 appState.plan = result.data.plan;
        //                 appState.visitors = result.data.visitors;
        //                 if (appState.profile) {
        //                     resolveInitialPath();
        //                 } else {
        //                     updatePage(setupPage());
        //                 }
        //             })
        //             .catch((error) => {
        //                 console.error(error);
        //                 updatePage(generalErrorPage());
        //             });
        //     } else {
        //         appState.profile = null;
        //         updatePage(loginPage());
        //     }
        // });
    </script>
</body>

</html>